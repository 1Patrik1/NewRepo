<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VZT Konstrukce - Spr√°va projekt≈Ø</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>VZT Konstrukce</h1>
                <p>Syst√©m spr√°vy projekt≈Ø klimatizace a vzduchotechniky</p>
            </div>
            
            <div class="login-tabs">
                <button class="tab-btn active" data-tab="login">P≈ôihl√°≈°en√≠</button>
                <button class="tab-btn" data-tab="register">Registrace</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="login-form active">
                <div class="form-group">
                    <label class="form-label" for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="loginPassword">Heslo:</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <button type="button" id="loginBtn" class="btn btn--primary btn--full-width">P≈ôihl√°sit se</button>
                
                <div class="demo-accounts">
                    <p>Demo √∫ƒçty:</p>
                    <button type="button" class="btn btn--outline btn--sm demo-btn" data-role="admin">Admin</button>
                    <button type="button" class="btn btn--outline btn--sm demo-btn" data-role="supervisor">Vedouc√≠</button>
                    <button type="button" class="btn btn--outline btn--sm demo-btn" data-role="worker">Dƒõln√≠k</button>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="login-form">
                <div class="form-group">
                    <label class="form-label" for="regName">Jm√©no:</label>
                    <input type="text" id="regName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="regEmail">Email:</label>
                    <input type="email" id="regEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="regPassword">Heslo:</label>
                    <input type="password" id="regPassword" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="regRole">Role:</label>
                    <select id="regRole" class="form-control" required>
                        <option value="">Vyberte roli</option>
                        <option value="worker">Dƒõln√≠k</option>
                        <option value="supervisor">Vedouc√≠</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="button" id="registerBtn" class="btn btn--primary btn--full-width">Registrovat</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app hidden">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>VZT Konstrukce</h2>
                <div class="user-info">
                    <span id="currentUser">U≈æivatel</span>
                    <span id="currentRole" class="role-badge">Role</span>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li><a href="#" class="nav-item active" data-section="dashboard">üìä Dashboard</a></li>
                <li><a href="#" class="nav-item" data-section="gps">üó∫Ô∏è GPS & Doch√°zka</a></li>
                <li><a href="#" class="nav-item" data-section="photos">üì∑ Fotodokumentace</a></li>
                <li><a href="#" class="nav-item" data-section="reports">üìã Reporty</a></li>
                <li><a href="#" class="nav-item" data-section="calculators">üßÆ VZT Kalkulaƒçky</a></li>
                <li><a href="#" class="nav-item" data-section="chat">üí¨ Chat</a></li>
                <li class="admin-only hidden"><a href="#" class="nav-item" data-section="admin">‚öôÔ∏è Administrace</a></li>
                <li><a href="#" class="nav-item" data-section="settings">üõ†Ô∏è Nastaven√≠</a></li>
                <li><a href="#" class="nav-item" data-section="export">üì§ Export</a></li>
            </ul>
            
            <div class="sidebar-footer">
                <button id="logoutBtn" class="btn btn--outline btn--sm">Odhl√°sit se</button>
                <button id="themeToggle" class="btn btn--secondary btn--sm">üåô</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1>Dashboard</h1>
                    <div class="current-time" id="currentTime"></div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3>Aktivn√≠ projekty</h3>
                        <div class="stat-number" id="activeProjects">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Dne≈°n√≠ fotky</h3>
                        <div class="stat-number" id="todayPhotos">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Reporty tento t√Ωden</h3>
                        <div class="stat-number" id="weeklyReports">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Pracovn√≠ doba</h3>
                        <div class="stat-number" id="workTime">0h</div>
                    </div>
                </div>

                <div class="projects-grid" id="projectsGrid">
                    <!-- Projects will be loaded dynamically -->
                </div>

                <div class="weather-widget">
                    <h3>Poƒças√≠</h3>
                    <div class="weather-info">
                        <span>Praha: 22¬∞C ‚òÄÔ∏è</span>
                        <span>V√≠tr: 5 km/h</span>
                    </div>
                </div>
            </section>

            <!-- GPS & Attendance Section -->
            <section id="gps" class="content-section">
                <div class="section-header">
                    <h1>GPS & Doch√°zka</h1>
                    <div class="attendance-status" id="attendanceStatus">
                        <button id="checkInBtn" class="btn btn--primary">Check In</button>
                        <button id="checkOutBtn" class="btn btn--secondary hidden">Check Out</button>
                    </div>
                </div>
                
                <div class="gps-content">
                    <div id="map" style="height: 400px; border-radius: var(--radius-lg);"></div>
                    <div class="attendance-log">
                        <h3>Doch√°zka dnes</h3>
                        <div id="attendanceList" class="attendance-entries">
                            <!-- Attendance entries will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Photos Section -->
            <section id="photos" class="content-section">
                <div class="section-header">
                    <h1>Fotodokumentace</h1>
                    <button id="uploadPhotoBtn" class="btn btn--primary">üì∑ P≈ôidat foto</button>
                </div>
                
                <div class="photo-filters">
                    <select id="projectFilter" class="form-control">
                        <option value="">V≈°echny projekty</option>
                    </select>
                    <input type="date" id="dateFilter" class="form-control">
                </div>
                
                <div class="photo-gallery" id="photoGallery">
                    <!-- Photos will be loaded dynamically -->
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="content-section">
                <div class="section-header">
                    <h1>Reporty & Protokoly</h1>
                    <button id="createReportBtn" class="btn btn--primary">üìã Nov√Ω report</button>
                </div>
                
                <div class="reports-list" id="reportsList">
                    <!-- Reports will be loaded dynamically -->
                </div>
            </section>

            <!-- Calculators Section -->
            <section id="calculators" class="content-section">
                <div class="section-header">
                    <h1>VZT Kalkulaƒçky</h1>
                </div>
                
                <div class="calculator-tabs">
                    <button class="calc-tab-btn active" data-calc="pipe-sizing">Velikost potrub√≠</button>
                    <button class="calc-tab-btn" data-calc="duct-length">D√©lka kan√°lu</button>
                    <button class="calc-tab-btn" data-calc="airflow">Pr≈Øtok vzduchu</button>
                    <button class="calc-tab-btn" data-calc="pressure-loss">Tlakov√© ztr√°ty</button>
                </div>

                <!-- Pipe Sizing Calculator -->
                <div id="pipe-sizing" class="calculator-panel active">
                    <h3>V√Ωpoƒçet velikosti potrub√≠</h3>
                    <div class="calc-inputs">
                        <div class="form-group">
                            <label class="form-label">Pr≈Øtok (m¬≥/h):</label>
                            <input type="number" id="pipeFlow" class="form-control" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rychlost (m/s):</label>
                            <input type="number" id="pipeVelocity" class="form-control" step="0.1" value="2.5">
                        </div>
                        <button id="calcPipe" class="btn btn--primary">Vypoƒç√≠tat</button>
                    </div>
                    <div class="calc-results" id="pipeResults"></div>
                </div>

                <!-- Duct Length Calculator -->
                <div id="duct-length" class="calculator-panel">
                    <h3>V√Ωpoƒçet d√©lky kan√°lu</h3>
                    <div class="calc-inputs">
                        <div class="form-group">
                            <label class="form-label">P≈ô√≠m√° d√©lka (m):</label>
                            <input type="number" id="ductStraight" class="form-control" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Poƒçet ohyb≈Ø:</label>
                            <input type="number" id="ductBends" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Poƒçet odboƒçek:</label>
                            <input type="number" id="ductBranches" class="form-control">
                        </div>
                        <button id="calcDuct" class="btn btn--primary">Vypoƒç√≠tat</button>
                    </div>
                    <div class="calc-results" id="ductResults"></div>
                </div>

                <!-- Airflow Calculator -->
                <div id="airflow" class="calculator-panel">
                    <h3>V√Ωpoƒçet pr≈Øtoku vzduchu</h3>
                    <div class="calc-inputs">
                        <div class="form-group">
                            <label class="form-label">Objem m√≠stnosti (m¬≥):</label>
                            <input type="number" id="roomVolume" class="form-control" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">V√Ωmƒõna vzduchu (1/h):</label>
                            <input type="number" id="airChanges" class="form-control" step="0.1" value="3">
                        </div>
                        <button id="calcAirflow" class="btn btn--primary">Vypoƒç√≠tat</button>
                    </div>
                    <div class="calc-results" id="airflowResults"></div>
                </div>

                <!-- Pressure Loss Calculator -->
                <div id="pressure-loss" class="calculator-panel">
                    <h3>Tlakov√© ztr√°ty</h3>
                    <div class="calc-inputs">
                        <div class="form-group">
                            <label class="form-label">D√©lka potrub√≠ (m):</label>
                            <input type="number" id="pipeLength" class="form-control" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pr≈Ømƒõr (mm):</label>
                            <input type="number" id="pipeDiameter" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rychlost (m/s):</label>
                            <input type="number" id="pressureVelocity" class="form-control" step="0.1">
                        </div>
                        <button id="calcPressure" class="btn btn--primary">Vypoƒç√≠tat</button>
                    </div>
                    <div class="calc-results" id="pressureResults"></div>
                </div>
            </section>

            <!-- Chat Section -->
            <section id="chat" class="content-section">
                <div class="section-header">
                    <h1>Chat</h1>
                    <select id="chatChannel" class="form-control">
                        <option value="general">Obecn√Ω</option>
                        <option value="emergency">Nouzov√Ω</option>
                    </select>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be loaded here -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" class="form-control" placeholder="Napi≈°te zpr√°vu...">
                        <button id="sendMessageBtn" class="btn btn--primary">Odeslat</button>
                    </div>
                </div>
            </section>

            <!-- Admin Section -->
            <section id="admin" class="content-section">
                <div class="section-header">
                    <h1>Administrace</h1>
                </div>
                
                <div class="admin-tabs">
                    <button class="admin-tab-btn active" data-tab="users">U≈æivatel√©</button>
                    <button class="admin-tab-btn" data-tab="audit">Audit log</button>
                    <button class="admin-tab-btn" data-tab="system">Syst√©m</button>
                </div>

                <div id="admin-users" class="admin-panel active">
                    <h3>Spr√°va u≈æivatel≈Ø</h3>
                    <button id="addUserBtn" class="btn btn--primary">P≈ôidat u≈æivatele</button>
                    <div class="users-table" id="usersTable">
                        <!-- Users table will be loaded here -->
                    </div>
                </div>

                <div id="admin-audit" class="admin-panel">
                    <h3>Audit log</h3>
                    <div id="auditLog">
                        <!-- Audit entries will be loaded here -->
                    </div>
                </div>

                <div id="admin-system" class="admin-panel">
                    <h3>Syst√©mov√© informace</h3>
                    <div class="system-info">
                        <p>Verze aplikace: 1.0.0</p>
                        <p>Poƒçet u≈æivatel≈Ø: <span id="totalUsers">0</span></p>
                        <p>Poƒçet projekt≈Ø: <span id="totalProjects">0</span></p>
                        <p>Celkem fotek: <span id="totalPhotos">0</span></p>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h1>Nastaven√≠</h1>
                </div>
                
                <div class="settings-form">
                    <div class="form-group">
                        <label class="form-label">Jm√©no:</label>
                        <input type="text" id="settingsName" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email:</label>
                        <input type="email" id="settingsEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notifikace:</label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notificationsEnabled" checked>
                            Povolit notifikace
                        </label>
                    </div>
                    <button id="saveSettingsBtn" class="btn btn--primary">Ulo≈æit nastaven√≠</button>
                </div>
            </section>

            <!-- Export Section -->
            <section id="export" class="content-section">
                <div class="section-header">
                    <h1>Export dat</h1>
                </div>
                
                <div class="export-options">
                    <div class="export-card">
                        <h3>Kompletn√≠ export</h3>
                        <p>Export v≈°ech dat aplikace</p>
                        <button id="exportAllBtn" class="btn btn--primary">Exportovat v≈°e (JSON)</button>
                    </div>
                    <div class="export-card">
                        <h3>Projektov√Ω export</h3>
                        <p>Export dat konkr√©tn√≠ho projektu</p>
                        <select id="exportProjectSelect" class="form-control">
                            <option value="">Vyberte projekt</option>
                        </select>
                        <button id="exportProjectBtn" class="btn btn--primary">Exportovat projekt</button>
                    </div>
                    <div class="export-card">
                        <h3>Z√°loha syst√©mu</h3>
                        <p>Vytvo≈ôit kompletn√≠ z√°lohu</p>
                        <button id="createBackupBtn" class="btn btn--primary">Vytvo≈ôit z√°lohu</button>
                        <input type="file" id="restoreBackup" accept=".json" class="hidden">
                        <button id="restoreBackupBtn" class="btn btn--secondary">Obnovit z√°lohu</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Photo Upload Modal -->
    <div id="photoModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>P≈ôidat foto</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Projekt:</label>
                    <select id="photoProject" class="form-control" required>
                        <option value="">Vyberte projekt</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Popis:</label>
                    <textarea id="photoDescription" class="form-control" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Foto:</label>
                    <input type="file" id="photoFile" class="form-control" accept="image/*" multiple>
                </div>
                <div class="form-actions">
                    <button id="savePhotoBtn" class="btn btn--primary">Ulo≈æit foto</button>
                    <button class="btn btn--secondary modal-close">Zru≈°it</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="reportModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nov√Ω report</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Typ reportu:</label>
                    <select id="reportType" class="form-control" required>
                        <option value="">Vyberte typ</option>
                        <option value="daily">Denn√≠ report</option>
                        <option value="weekly">T√Ωdenn√≠ report</option>
                        <option value="inspection">Kontroln√≠ protokol</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Projekt:</label>
                    <select id="reportProject" class="form-control" required>
                        <option value="">Vyberte projekt</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">N√°zev:</label>
                    <input type="text" id="reportTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Obsah:</label>
                    <textarea id="reportContent" class="form-control" rows="6"></textarea>
                </div>
                <div class="form-actions">
                    <button id="saveReportBtn" class="btn btn--primary">Ulo≈æit report</button>
                    <button class="btn btn--secondary modal-close">Zru≈°it</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>